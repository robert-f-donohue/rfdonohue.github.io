---
const { href } = Astro.props as { href: string };

const norm = (p: string) => (p.endsWith("/") ? p.slice(0, -1) : p) || "/";
const current = norm(Astro.url.pathname);
const target = norm(href);

const isActive = current === target || (target !== "/" && current.startsWith(target + "/"));
---

<a
  href={href}
  class={`relative rounded-xl px-3 py-1.5 text-sm transition ${
    isActive
      ? "text-fg bg-panel/70 border border-border"
      : "text-muted hover:text-fg hover:bg-panel/50"
  }`}
>
  <slot />
  {isActive ? (
    <span class="absolute inset-x-2 -bottom-[7px] h-[2px] rounded-full bg-accent/70"></span>
  ) : null}
</a>

