---
import { getCollection } from "astro:content";
import SiteLayout from "../layouts/SiteLayout.astro";

const startupProjects = (await getCollection("projects"))
  .filter((p) => p.data.category === "startup")
  .sort((a, b) => {
    const ad = a.data.pubDate ? a.data.pubDate.getTime() : 0;
    const bd = b.data.pubDate ? b.data.pubDate.getTime() : 0;
    return bd - ad;
  });
---

<SiteLayout title="Now" description="What I'm focused on right now.">
  <h1 class="text-3xl font-bold">Now</h1>
  <p class="mt-2 opacity-80">
    What I’m focused on right now — building, learning, and where my time is going.
  </p>

  <section class="mt-10">
    <h2 class="text-xl font-semibold">Building</h2>
    <p class="mt-2">
      I’m currently working on Enverdex — a platform for building decarbonization strategy design.
      My focus is turning deep optimization + building-science work into a usable product.
    </p>

    {startupProjects.length ? (
      <ul class="mt-6 space-y-4">
        {startupProjects.map((p) => (
          <li class="rounded-xl border border-black/10 p-5 shadow-sm">
            <a class="text-lg font-semibold" href={`/projects/${p.slug}/`}>{p.data.title}</a>
            <p class="mt-1">{p.data.description}</p>
            <div class="mt-3 text-sm opacity-80">
              <strong>Status:</strong> {p.data.status}
              {p.data.website ? <>{" · "}<a class="underline" href={p.data.website} target="_blank">Website</a></> : null}
              {p.data.demo ? <>{" · "}<a class="underline" href={p.data.demo} target="_blank">Demo</a></> : null}
              {p.data.slides ? <>{" · "}<a class="underline" href={p.data.slides} target="_blank">Slides</a></> : null}
            </div>
          </li>
        ))}
      </ul>
    ) : (
      <p class="mt-4 opacity-80">No startup items added yet.</p>
    )}
  </section>

  <section class="mt-10">
    <h2 class="text-xl font-semibold">Writing & Research</h2>
    <p class="mt-2">
      I keep my academic and research case studies under <a class="underline" href="/projects/">Projects</a>,
      and longer technical write-ups under <a class="underline" href="/blog/">Writing</a>.
    </p>
  </section>

  <section class="mt-10">
    <h2 class="text-xl font-semibold">Contact</h2>
    <p class="mt-2">
      If you want to chat about building decarbonization, optimization, or applied Bayesian modeling,
      reach me via the contact links on <a class="underline" href="/about/">About</a>.
    </p>
  </section>
</SiteLayout>